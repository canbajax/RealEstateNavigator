import {
  users, type User, type InsertUser,
  cities, type City, type InsertCity,
  propertyTypes, type PropertyType, type InsertPropertyType,
  listings, type Listing, type InsertListing,
  contactMessages, type ContactMessage, type InsertContactMessage
} from "@shared/schema";

export interface IStorage {
  // User operations
  getUser(id: number): Promise<User | undefined>;
  getUserByUsername(username: string): Promise<User | undefined>;
  createUser(user: InsertUser): Promise<User>;
  
  // City operations
  getCities(): Promise<City[]>;
  getCityById(id: number): Promise<City | undefined>;
  createCity(city: InsertCity): Promise<City>;
  
  // Property Type operations
  getPropertyTypes(): Promise<PropertyType[]>;
  getPropertyTypeById(id: number): Promise<PropertyType | undefined>;
  createPropertyType(propertyType: InsertPropertyType): Promise<PropertyType>;
  
  // Listing operations
  getListings(filters?: ListingFilters): Promise<Listing[]>;
  getListingById(id: number): Promise<Listing | undefined>;
  getFeaturedListings(limit?: number): Promise<Listing[]>;
  createListing(listing: InsertListing): Promise<Listing>;
  
  // Contact Message operations
  createContactMessage(message: InsertContactMessage): Promise<ContactMessage>;
}

export interface ListingFilters {
  cityId?: number;
  propertyTypeId?: number;
  listingType?: string;
  minPrice?: number;
  maxPrice?: number;
  minSquareMeters?: number;
  maxSquareMeters?: number;
  roomCount?: number;
  limit?: number;
  search?: string;
}

export class MemStorage implements IStorage {
  private users: Map<number, User>;
  private cities: Map<number, City>;
  private propertyTypes: Map<number, PropertyType>;
  private listings: Map<number, Listing>;
  private contactMessages: Map<number, ContactMessage>;
  
  private userCurrentId: number;
  private cityCurrentId: number;
  private propertyTypeCurrentId: number;
  private listingCurrentId: number;
  private contactMessageCurrentId: number;

  constructor() {
    this.users = new Map();
    this.cities = new Map();
    this.propertyTypes = new Map();
    this.listings = new Map();
    this.contactMessages = new Map();
    
    this.userCurrentId = 1;
    this.cityCurrentId = 1;
    this.propertyTypeCurrentId = 1;
    this.listingCurrentId = 1;
    this.contactMessageCurrentId = 1;
    
    // Initialize with sample data
    this.initializeData();
  }

  // User operations
  async getUser(id: number): Promise<User | undefined> {
    return this.users.get(id);
  }

  async getUserByUsername(username: string): Promise<User | undefined> {
    return Array.from(this.users.values()).find(
      (user) => user.username === username,
    );
  }

  async createUser(insertUser: InsertUser): Promise<User> {
    const id = this.userCurrentId++;
    const user: User = { ...insertUser, id };
    this.users.set(id, user);
    return user;
  }
  
  // City operations
  async getCities(): Promise<City[]> {
    return Array.from(this.cities.values());
  }
  
  async getCityById(id: number): Promise<City | undefined> {
    return this.cities.get(id);
  }
  
  async createCity(insertCity: InsertCity): Promise<City> {
    const id = this.cityCurrentId++;
    const city: City = { ...insertCity, id };
    this.cities.set(id, city);
    return city;
  }
  
  // Property Type operations
  async getPropertyTypes(): Promise<PropertyType[]> {
    return Array.from(this.propertyTypes.values());
  }
  
  async getPropertyTypeById(id: number): Promise<PropertyType | undefined> {
    return this.propertyTypes.get(id);
  }
  
  async createPropertyType(insertPropertyType: InsertPropertyType): Promise<PropertyType> {
    const id = this.propertyTypeCurrentId++;
    const propertyType: PropertyType = { ...insertPropertyType, id };
    this.propertyTypes.set(id, propertyType);
    return propertyType;
  }
  
  // Listing operations
  async getListings(filters?: ListingFilters): Promise<Listing[]> {
    let listings = Array.from(this.listings.values());
    
    if (filters) {
      if (filters.cityId !== undefined) {
        listings = listings.filter(listing => listing.cityId === filters.cityId);
      }
      
      if (filters.propertyTypeId !== undefined) {
        listings = listings.filter(listing => listing.propertyTypeId === filters.propertyTypeId);
      }
      
      if (filters.listingType !== undefined) {
        listings = listings.filter(listing => listing.listingType === filters.listingType);
      }
      
      if (filters.minPrice !== undefined) {
        listings = listings.filter(listing => listing.price >= filters.minPrice!);
      }
      
      if (filters.maxPrice !== undefined) {
        listings = listings.filter(listing => listing.price <= filters.maxPrice!);
      }
      
      if (filters.minSquareMeters !== undefined) {
        listings = listings.filter(listing => listing.squareMeters >= filters.minSquareMeters!);
      }
      
      if (filters.maxSquareMeters !== undefined) {
        listings = listings.filter(listing => listing.squareMeters <= filters.maxSquareMeters!);
      }
      
      if (filters.roomCount !== undefined) {
        listings = listings.filter(listing => listing.roomCount === filters.roomCount);
      }
      
      if (filters.search !== undefined) {
        const searchLower = filters.search.toLowerCase();
        listings = listings.filter(listing => 
          listing.title.toLowerCase().includes(searchLower) || 
          listing.description.toLowerCase().includes(searchLower) ||
          listing.district.toLowerCase().includes(searchLower) ||
          listing.address.toLowerCase().includes(searchLower)
        );
      }
      
      if (filters.limit !== undefined) {
        listings = listings.slice(0, filters.limit);
      }
    }
    
    // Sort by postedAt in descending order (newest first)
    return listings.sort((a, b) => {
      return new Date(b.postedAt).getTime() - new Date(a.postedAt).getTime();
    });
  }
  
  async getListingById(id: number): Promise<Listing | undefined> {
    return this.listings.get(id);
  }
  
  async getFeaturedListings(limit: number = 4): Promise<Listing[]> {
    const featuredListings = Array.from(this.listings.values())
      .filter(listing => listing.isFeatured)
      .sort((a, b) => new Date(b.postedAt).getTime() - new Date(a.postedAt).getTime());
    
    return featuredListings.slice(0, limit);
  }
  
  async createListing(insertListing: InsertListing): Promise<Listing> {
    const id = this.listingCurrentId++;
    const now = new Date();
    const listing: Listing = { 
      ...insertListing, 
      id, 
      postedAt: now 
    };
    this.listings.set(id, listing);
    return listing;
  }
  
  // Contact Message operations
  async createContactMessage(insertMessage: InsertContactMessage): Promise<ContactMessage> {
    const id = this.contactMessageCurrentId++;
    const now = new Date();
    const message: ContactMessage = { 
      ...insertMessage, 
      id, 
      createdAt: now 
    };
    this.contactMessages.set(id, message);
    return message;
  }
  
  // Initialize with sample data
  private initializeData() {
    // Create sample cities
    const citiesData: InsertCity[] = [
      { 
        name: "İstanbul", 
        imageUrl: "https://images.unsplash.com/photo-1524231757912-21f4fe3a7200?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80", 
        listingCount: 67 
      },
      { 
        name: "Ankara", 
        imageUrl: "https://images.unsplash.com/photo-1609783232088-f1681a6f1b4d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80", 
        listingCount: 48 
      },
      { 
        name: "İzmir", 
        imageUrl: "https://images.unsplash.com/photo-1617391258031-f8d80b22fb58?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80", 
        listingCount: 36 
      },
      { 
        name: "Antalya", 
        imageUrl: "https://images.unsplash.com/photo-1605537964075-3df587920e9b?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80", 
        listingCount: 29 
      },
      { 
        name: "Bursa", 
        imageUrl: "https://images.unsplash.com/photo-1614436981601-5ce6396ce101?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80", 
        listingCount: 20 
      },
      {
        name: "Muğla",
        imageUrl: "https://images.unsplash.com/photo-1559131903-e27ffd952c2d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
        listingCount: 15
      },
      {
        name: "Eskişehir",
        imageUrl: "https://images.unsplash.com/photo-1589912187107-3ab407f13e74?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
        listingCount: 12
      },
      {
        name: "Aydın",
        imageUrl: "https://images.unsplash.com/photo-1591146590908-9cd0cb6e6ec6?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
        listingCount: 9
      },
      {
        name: "Trabzon",
        imageUrl: "https://images.unsplash.com/photo-1593238750802-7c9be9c0aad0?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
        listingCount: 7
      },
      {
        name: "Konya",
        imageUrl: "https://images.unsplash.com/photo-1568322951949-12a4b65fad82?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
        listingCount: 5
      }
    ];
    // Create the property types
    propertyTypesData.forEach(propertyType => this.createPropertyType(propertyType));
    
    // Helper function to generate random dates in the past (for postedAt)
    const getRandomPastDate = (daysMax = 90) => {
      const today = new Date();
      const daysAgo = Math.floor(Math.random() * daysMax) + 1;
      const pastDate = new Date(today);
      pastDate.setDate(today.getDate() - daysAgo);
      return pastDate;
    };
    
    // Helper function to generate random float in range
    const randomFloat = (min: number, max: number) => {
      return Math.random() * (max - min) + min;
    };
    
    // Helper function to generate random integer in range (inclusive)
    const randomInt = (min: number, max: number) => {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    };
    
    // Generate 200 sample listings
    const listingsData: InsertListing[] = [];
    
    // Base coordinates for cities (approximate centers)
    const cityCoordinates = {
      1: { lat: 41.0082, lng: 28.9784 }, // İstanbul
      2: { lat: 39.9334, lng: 32.8597 }, // Ankara
      3: { lat: 38.4192, lng: 27.1287 }, // İzmir
      4: { lat: 36.8969, lng: 30.7133 }, // Antalya
      5: { lat: 40.1885, lng: 29.0610 }, // Bursa
      6: { lat: 37.2154, lng: 28.3634 }, // Muğla
      7: { lat: 39.7667, lng: 30.5256 }, // Eskişehir
      8: { lat: 37.8560, lng: 27.8416 }, // Aydın
      9: { lat: 41.0053, lng: 39.7167 }, // Trabzon
    // Helper function to create property descriptions
    const getPropertyDescription = (propertyTypeId: number, listingType: string, rooms?: number) => {
      const descriptions = {
        1: [ // Daire
          `Modern mimarisi ile dikkat çeken ${rooms} odalı daire. Ferah ve aydınlık iç mekanlar, kaliteli malzemeler ve akıllı ev sistemleri ile donatılmıştır. Ankastre mutfak, yerden ısıtma ve geniş balkon mevcuttur. Site içerisinde havuz, fitness salonu ve çocuk oyun alanı bulunmaktadır.`,
          `Şehir merkezinde, ulaşım imkanlarına yakın konumda ${rooms} odalı daire. Yeni binada, yüksek tavanlı, güney cepheli ve ışık alan daire. Ankastre mutfak, ısı yalıtımı ve deprem yönetmeliğine uygun inşa edilmiştir.`,
          `Güvenlikli site içerisinde ${rooms} odalı daire. Açık mutfak, geniş salon ve ferah odaları ile konforlu bir yaşam sunmaktadır. Site içerisinde otopark, çocuk oyun alanı ve 7/24 güvenlik bulunmaktadır.`,
          `Metrobüs durağına 5 dakika yürüme mesafesinde, ${rooms} odalı daire. Yeni binanın ${randomInt(2, 8)}. katında yer alan daire, güney-doğu cepheli olup bol ışık almaktadır. Doğalgaz kombi, laminant parke zemin ve PVC doğrama mevcuttur.`,
          `Deniz manzaralı, ${rooms} odalı daire. Yenilenmiş mutfak ve banyosu ile kullanıma hazır. Kapı ve pencereler ısı yalıtımlı olup, ses izolasyonu yapılmıştır. Ayrıca binanın dış cephesi mantolama ile kaplıdır.`
        ],
        2: [ // Villa
          `Özel havuzlu, bahçeli lüks villa. ${rooms} oda, ${Math.ceil(rooms/2)} banyo, geniş salon ve mutfak ile konforlu bir yaşam sunmaktadır. Bahçesinde barbekü alanı, kamelyalar ve otomatik sulama sistemi mevcuttur.`,
          `Deniz manzaralı, müstakil bahçeli villa. ${rooms} yatak odası, ${Math.ceil(rooms/2)} banyo, çift salon ve amerikan mutfak ile ferah bir yaşam alanı. Akıllı ev sistemleri, yerden ısıtma ve güneş enerjisi sistemleri bulunmaktadır.`,
          `Modern mimarisi ile dikkat çeken ${rooms} odalı villa. Açık havuz, jakuzi ve sauna ile lüks bir yaşam vaat ediyor. Geniş bahçesi içerisinde otopark ve güvenlik sistemi mevcuttur.`,
          `Göl manzaralı, doğa ile iç içe ${rooms} odalı villa. Şömineli salon, geniş teras ve özel bahçesi ile huzurlu bir yaşam sunmaktadır. Güneş enerjisi, jeneratör ve su deposu ile tam donanımlıdır.`,
          `Lüks site içerisinde ${rooms} odalı villa. Özel yüzme havuzu, bahçe ve terasları ile konforlu bir yaşam alanı. Site içerisinde tenis kortu, basketbol sahası ve yürüyüş parkuru bulunmaktadır.`
        ],
        3: [ // İş Yeri
          `İşlek cadde üzerinde, yüksek vitrinli dükkan. WC ve depo alanı mevcut olup, her türlü ticari faaliyet için uygundur. İş yeri devir ücreti yoktur.`,
          `Yeni plazada, modern ofis katı. Açık ofis düzeni, toplantı odası ve mutfak alanı mevcuttur. 7/24 güvenlik, kapalı otopark ve yüksek hızlı internet altyapısı ile donatılmıştır.`,
          `AVM içerisinde mağaza. İnsan sirkülasyonu yüksek konumda, her türlü ticari faaliyet için uygundur. Klima, güvenlik ve yangın sistemleri mevcuttur.`,
          `Sanayi bölgesinde üretim ve depolama alanı. Yüksek tavan, geniş kapı ve rampa ile lojistik açıdan avantajlı. Ofis alanı, yemekhane ve güvenlik mevcuttur.`,
          `Merkezi konumda, cadde üzerinde restoran/kafe. Mutfak donanımı, bar ve oturma grupları ile devren satılıktır. Arka bahçesi ve teraslı alan mevcuttur.`
        ],
        4: [ // Arsa
          `Deniz manzaralı, imarlı konut arsası. Elektrik, su ve doğalgaz altyapısı hazır. Yol cepheli ve köşe parsel olup, inşaata hazır durumdadır.`,
          `Tarla vasfında, yatırımlık arsa. İmara açılması beklenen bölgede, ana yola yakın konumda. Sulama kuyusu ve elektrik hattı mevcuttur.`,
          `Sanayi imarlı ticari arsa. Organize sanayi bölgesinde, ana cadde üzerinde. Altyapısı tamamlanmış, ruhsata hazır durumdadır.`,
          `Göl manzaralı, müstakil ev imarlı arsa. %20 inşaat izni ile 2 katlı yapı yapılabilir. Elektrik ve su altyapısı mevcuttur.`,
          `Turizm imarlı arsa. Denize yakın konumda, otel veya tatil köyü yapımına uygundur. %40 inşaat izni ile geniş yapılaşma hakkına sahiptir.`
        ],
        5: [ // Yazlık
          `Denize sıfır konumda, site içerisinde ${rooms} odalı yazlık. Özel plajı, havuzu ve sosyal tesisleri ile yaz tatiliniz için ideal. Eşyalı olarak teslim edilecektir.`,
          `Deniz manzaralı, müstakil bahçeli yazlık. ${rooms} oda, ${Math.ceil(rooms/2)} banyo ve geniş terası ile konforlu bir tatil imkanı sunmaktadır. Bahçesinde barbekü ve oturma grupları mevcuttur.`,
          `Site içerisinde ${rooms} odalı yazlık. Ortak havuz, tenis kortu ve çocuk oyun alanı kullanımı. Denize yürüme mesafesinde olup, merkeze yakın konumdadır.`,
          `Göl kenarında, doğa ile iç içe ${rooms} odalı yazlık. Özel iskelesi, bahçesi ve manzarası ile huzurlu bir tatil imkanı. Tam donanımlı mutfak ve klimalar mevcuttur.`,
          `Dağ manzaralı, ${rooms} oda banyolu yazlık. Bahçesi, havuzu ve barbekü alanı ile ailenizle keyifli vakit geçirebileceğiniz bir tatil evi. Doğa yürüyüşleri için ideal bir konumda yer almaktadır.`
        ],
        6: [ // Depo
          `Sanayi bölgesinde, 7 metre tavan yüksekliğine sahip depo. Tır ve kamyon yanaşma rampası, geniş manevra alanı ve güvenlik sistemi mevcuttur.`,
          `Lojistik firma ve üreticiler için uygun, modern depo. Yüksek tavan, geniş kapılar ve ofis alanı ile kullanışlı bir çalışma ortamı sunmaktadır.`,
          `Organize sanayi bölgesinde, betonarme depo. Yangın söndürme sistemi, güvenlik kameraları ve alarm sistemleri ile donatılmıştır.`,
          `Ana yol üzerinde, lojistik depo. Büyük araç giriş kapısı, yükleme-indirme platformu ve forklift geçişine uygun geniş koridorlar mevcuttur.`,
          `Soğuk hava deposu. -18 dereceye kadar soğutma kapasitesi, hijyenik ortam ve özel izolasyon sistemleri ile gıda saklamaya uygundur.`
        ]
      };
      
      // Get random description based on property type
      const typeDescriptions = descriptions[propertyTypeId as keyof typeof descriptions];
      const baseDescription = typeDescriptions[Math.floor(Math.random() * typeDescriptions.length)];
      
      // Add listing type specific details
      let additionalDetails = "";
      
      if (listingType === "sell") {
        additionalDetails = " Kredi kullanımına uygundur. Tapu devrinde kolaylık sağlanacaktır. ";
      } else if (listingType === "rent") {
        additionalDetails = " Uzun süreli kiralama için uygundur. Depozito bedeli 2 aylık kira tutarındadır. ";
      } else if (listingType === "daily") {
        additionalDetails = " Günlük, haftalık kiralama için uygundur. Minimum 3 gün kiralama yapılmaktadır. ";
      }
      
      return baseDescription + additionalDetails;
    };
      10: { lat: 37.8715, lng: 32.4846 }  // Konya
    };
        fullName: "Deniz Aydın", 
        email: "deniz@emlakcompass.com", 
        phone: "+90 (531) 456 78 90", 
        avatarUrl: "https://randomuser.me/api/portraits/men/91.jpg" 
      },
      { 
        username: "baristuncer", 
        password: "password123", 
        fullName: "Barış Tuncer", 
        email: "baris@emlakcompass.com", 
        phone: "+90 (532) 678 90 12", 
        avatarUrl: "https://randomuser.me/api/portraits/men/95.jpg" 
      },
      { 
        username: "aysenur", 
        password: "password123", 
        fullName: "Ayşe Nur Kara", 
        email: "ayse@emlakcompass.com", 
        phone: "+90 (559) 789 01 23", 
        avatarUrl: "https://randomuser.me/api/portraits/women/90.jpg" 
      },
      { 
        username: "serhandogan", 
        password: "password123", 
        fullName: "Serhan Doğan", 
        email: "serhan@emlakcompass.com", 
        phone: "+90 (533) 890 12 34", 
        avatarUrl: "https://randomuser.me/api/portraits/men/99.jpg" 
      },
      { 
        username: "iremgunes", 
        password: "password123", 
        fullName: "İrem Güneş", 
    // Common image URLs for property types
    const propertyImages = {
      1: [ // Daire
        "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
        "https://images.unsplash.com/photo-1630699144867-37acfcb89f25?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
        "https://images.unsplash.com/photo-1600607687920-4e2a09cf159d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
        "https://images.unsplash.com/photo-1610527003928-47adb6ad1721?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
        "https://images.unsplash.com/photo-1613977257365-aaae5a9817ff?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
        "https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"
      ],
      2: [ // Villa
        "https://images.unsplash.com/photo-1580587771525-78b9dba3b914?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
        "https://images.unsplash.com/photo-1564013799919-ab600027ffc6?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
        "https://images.unsplash.com/photo-1616137466211-f939a420be84?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1332&q=80",
        "https://images.unsplash.com/photo-1560184897-ae75f418493e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
        "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"
      ],
      3: [ // İş Yeri
        "https://images.unsplash.com/photo-1497366754035-f200968a6e72?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
        "https://images.unsplash.com/photo-1568992687947-868a62a9f521?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1332&q=80",
        "https://images.unsplash.com/photo-1604328698692-f76ea9498e76?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
        "https://images.unsplash.com/photo-1556761175-b413da4baf72?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80"
      ],
      4: [ // Arsa
        "https://images.unsplash.com/photo-1500382017468-9049fed747ef?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1332&q=80",
        "https://images.unsplash.com/photo-1591474200742-8e512e6f98f8?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
        "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
        "https://images.unsplash.com/photo-1628624747186-a941c476b7ef?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"
      ],
      5: [ // Yazlık
        "https://images.unsplash.com/photo-1564501049412-61c2a3083791?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1332&q=80",
        "https://images.unsplash.com/photo-1572120360610-d971b9d7767c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
        "https://images.unsplash.com/photo-1576941089067-2de3c901e126?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1632&q=80",
        "https://images.unsplash.com/photo-1613553507747-5f8d62ad5904?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"
      ],
      6: [ // Depo
        "https://images.unsplash.com/photo-1586528116311-ad8dd3c8310d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
        "https://images.unsplash.com/photo-1553413077-190dd305871c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
        "https://images.unsplash.com/photo-1523828223637-a8d3e394bb6e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"
      ]
    };
    
    // Property title prefixes based on property type and listing type
    const propertyTitles = {
      sell: {
        1: ["Satılık Lüks Daire", "Satılık Modern Daire", "Satılık Yeni Daire", "Satılık Ferah Daire", "Satılık Aydınlık Daire", "Satılık Deniz Manzaralı Daire"],
        2: ["Satılık Lüks Villa", "Satılık Modern Villa", "Satılık Havuzlu Villa", "Satılık Bahçeli Villa", "Satılık Deniz Manzaralı Villa", "Satılık Müstakil Villa"],
        3: ["Satılık İş Yeri", "Satılık Dükkan", "Satılık Ofis", "Satılık Mağaza", "Satılık Plaza Katı", "Satılık Ticari Alan"],
        4: ["Satılık Arsa", "Satılık İmarlı Arsa", "Satılık Yatırımlık Arsa", "Satılık Deniz Manzaralı Arsa", "Satılık Ticari Arsa", "Satılık Konut Arsası"],
        5: ["Satılık Yazlık", "Satılık Denize Yakın Yazlık", "Satılık Site İçi Yazlık", "Satılık Müstakil Yazlık", "Satılık Deniz Manzaralı Yazlık", "Satılık Eşyalı Yazlık"],
        6: ["Satılık Depo", "Satılık Lojistik Depo", "Satılık Antrepo", "Satılık Sanayi Deposu", "Satılık Soğuk Hava Deposu", "Satılık Ticari Depo"]
      },
      rent: {
        1: ["Kiralık Daire", "Kiralık Lüks Daire", "Kiralık Eşyalı Daire", "Kiralık Residence", "Kiralık Stüdyo Daire", "Kiralık Bahçe Katı"],
        2: ["Kiralık Villa", "Kiralık Lüks Villa", "Kiralık Havuzlu Villa", "Kiralık Bahçeli Villa", "Kiralık Eşyalı Villa", "Kiralık Müstakil Villa"],
        3: ["Kiralık İş Yeri", "Kiralık Dükkan", "Kiralık Ofis", "Kiralık Mağaza", "Kiralık Plaza Katı", "Kiralık Ticari Alan"],
        4: ["Kiralık Arsa", "Kiralık Tarla", "Kiralık Bahçe", "Kiralık Etkinlik Alanı", "Kiralık Sergi Alanı", "Kiralık Açık Alan"],
        5: ["Kiralık Yazlık", "Kiralık Denize Yakın Yazlık", "Kiralık Site İçi Yazlık", "Kiralık Müstakil Yazlık", "Kiralık Eşyalı Yazlık", "Kiralık Tatil Evi"],
        6: ["Kiralık Depo", "Kiralık Antrepo", "Kiralık Soğuk Hava Deposu", "Kiralık Lojistik Depo", "Kiralık Sanayi Deposu", "Kiralık Eşya Deposu"]
      },
      daily: {
        1: ["Günlük Kiralık Daire", "Günlük Kiralık Lüks Daire", "Günlük Kiralık Eşyalı Daire", "Günlük Kiralık Residence", "Günlük Kiralık Stüdyo", "Günlük Kiralık Apart"],
        2: ["Günlük Kiralık Villa", "Günlük Kiralık Lüks Villa", "Günlük Kiralık Havuzlu Villa", "Günlük Kiralık Eşyalı Villa", "Günlük Kiralık Deniz Manzaralı Villa", "Günlük Kiralık Tatil Villası"],
        3: ["Günlük Kiralık İş Yeri", "Günlük Kiralık Toplantı Salonu", "Günlük Kiralık Ofis", "Günlük Kiralık Etkinlik Alanı", "Günlük Kiralık Showroom", "Günlük Kiralık Stüdyo"],
        4: ["Günlük Kiralık Arsa", "Günlük Kiralık Etkinlik Alanı", "Günlük Kiralık Bahçe", "Günlük Kiralık Açık Alan", "Günlük Kiralık Organizasyon Alanı", "Günlük Kiralık Sergi Alanı"],
        5: ["Günlük Kiralık Yazlık", "Günlük Kiralık Tatil Evi", "Günlük Kiralık Site İçi Yazlık", "Günlük Kiralık Denize Yakın Yazlık", "Günlük Kiralık Müstakil Yazlık", "Günlük Kiralık Eşyalı Yazlık"],
        6: ["Günlük Kiralık Depo", "Günlük Kiralık Stok Alanı", "Günlük Kiralık Depolama Alanı", "Günlük Kiralık Eşya Deposu", "Günlük Kiralık Geçici Depo", "Günlük Kiralık Soğuk Hava Deposu"]
      }
    };
        email: "irem@emlakcompass.com", 
        phone: "+90 (551) 901 23 45", 
        avatarUrl: "https://randomuser.me/api/portraits/women/99.jpg" 
      }
      { 
        username: "cansu", 
        password: "password123", 
        fullName: "Cansu Yılmaz", 
        email: "cansu@emlakcompass.com", 
        phone: "+90 (558) 567 89 01", 
        avatarUrl: "https://randomuser.me/api/portraits/women/81.jpg" 
      },
      { 
        username: "selinen", 
        password: "password123", 
        fullName: "Selin Eren", 
        email: "selin@emlakcompass.com", 
    // District names for each city
    const cityDistricts = {
      1: ["Kadıköy", "Beşiktaş", "Şişli", "Üsküdar", "Beyoğlu", "Bakırköy", "Ataşehir", "Maltepe", "Sarıyer", "Bahçelievler"],
      2: ["Çankaya", "Keçiören", "Mamak", "Etimesgut", "Yenimahalle", "Altındağ", "Gölbaşı", "Polatlı", "Sincan", "Beypazarı"],
      3: ["Konak", "Karşıyaka", "Bornova", "Bayraklı", "Buca", "Çeşme", "Urla", "Güzelbahçe", "Menderes", "Karabağlar"],
      4: ["Muratpaşa", "Konyaaltı", "Kepez", "Alanya", "Manavgat", "Serik", "Kemer", "Kaş", "Kumluca", "Finike"],
      5: ["Nilüfer", "Osmangazi", "Yıldırım", "Gemlik", "Mudanya", "İnegöl", "Orhangazi", "Gürsu", "Kestel", "Karacabey"],
      6: ["Bodrum", "Fethiye", "Marmaris", "Milas", "Dalaman", "Datça", "Köyceğiz", "Ortaca", "Ula", "Yatağan"],
      7: ["Tepebaşı", "Odunpazarı", "Sivrihisar", "Çifteler", "Mahmudiye", "Seyitgazi", "Alpu", "Günyüzü", "İnönü", "Mihalgazi"],
      8: ["Efeler", "Kuşadası", "Nazilli", "Söke", "Didim", "Çine", "Germencik", "İncirliova", "Koçarlı", "Kuyucak"],
      9: ["Ortahisar", "Akçaabat", "Araklı", "Arsin", "Çaykara", "Dernekpazarı", "Düzköy", "Hayrat", "Köprübaşı", "Maçka"],
      10: ["Selçuklu", "Meram", "Karatay", "Akşehir", "Beyşehir", "Bozkır", "Çumra", "Doğanhisar", "Ereğli", "Hadim"]
    };
    
    // Address suffixes
    const addressSuffixes = [
      "Sokak", "Caddesi", "Bulvarı", "Mahallesi", "Sitesi", "Konutları", "Evleri", "Apartmanı", "Residence", "Plaza"
    ];
    
    // Street names
    const streetNames = [
      "Atatürk", "Cumhuriyet", "İstiklal", "Bağdat", "Gazi", "Millet", "Vatan", "Fatih", "Mevlana", "Piri Reis",
      "Adalet", "Çınar", "Güneş", "Lale", "Zambak", "Menekşe", "Yasemin", "Akasya", "Çamlık", "Deniz",
      "Nergis", "Papatya", "Gül", "Orkide", "Manolya", "Fulya", "Ihlamur", "Palmiye", "Zeytin", "Bahar"
    ];
    
    // Generate 200 listings
    for (let i = 1; i <= 200; i++) {
      // Determine property details
      const cityId = randomInt(1, 10);
      const propertyTypeId = randomInt(1, 6);
      const listingType = ["sell", "rent", "daily"][randomInt(0, 2)];
      
      // Some property types need room counts
      let roomCount = null;
      let bathroomCount = null;
      let parkingCount = null;
      
      if (propertyTypeId === 1 || propertyTypeId === 2 || propertyTypeId === 5) {
        // For apartments, villas, and summer houses
        roomCount = randomInt(1, 6);
        bathroomCount = randomInt(1, Math.max(1, Math.ceil(roomCount / 2)));
        parkingCount = randomInt(0, 3);
      } else if (propertyTypeId === 3) {
        // For shops/offices
        bathroomCount = randomInt(1, 2);
      }
      
      // Square meters based on property type
      let squareMeters;
      switch (propertyTypeId) {
        case 1: // Apartment
          squareMeters = randomInt(60, 250);
          break;
        case 2: // Villa
          squareMeters = randomInt(150, 600);
          break;
        case 3: // Commercial
          squareMeters = randomInt(50, 400);
          break;
        case 4: // Land
          squareMeters = randomInt(300, 5000);
          break;
        case 5: // Summer house
          squareMeters = randomInt(80, 300);
          break;
        case 6: // Warehouse
          squareMeters = randomInt(200, 1500);
          break;
        default:
          squareMeters = randomInt(80, 200);
      }
      
      // Generate listing price based on property type, listing type, and size
      let price;
      let rentPeriod = null;
      
      if (listingType === "sell") {
        switch (propertyTypeId) {
          case 1: // Apartment
            price = randomInt(1500000, 12000000);
            break;
          case 2: // Villa
            price = randomInt(5000000, 30000000);
            break;
          case 3: // Commercial
            price = randomInt(2000000, 15000000);
            break;
          case 4: // Land
            price = randomInt(500000, 8000000);
            break;
          case 5: // Summer house
            price = randomInt(2500000, 20000000);
            break;
          case 6: // Warehouse
            price = randomInt(3000000, 10000000);
            break;
          default:
            price = randomInt(2000000, 5000000);
        }
      } else if (listingType === "rent") {
        rentPeriod = "monthly";
        switch (propertyTypeId) {
          case 1: // Apartment
            price = randomInt(8000, 40000);
            break;
          case 2: // Villa
            price = randomInt(25000, 100000);
            break;
          case 3: // Commercial
            price = randomInt(15000, 80000);
            break;
          case 4: // Land
            price = randomInt(5000, 30000);
            break;
          case 5: // Summer house
            price = randomInt(20000, 80000);
            break;
          case 6: // Warehouse
            price = randomInt(20000, 60000);
            break;
          default:
            price = randomInt(10000, 30000);
        }
      } else { // daily
        rentPeriod = "daily";
        switch (propertyTypeId) {
          case 1: // Apartment
            price = randomInt(1000, 5000);
            break;
          case 2: // Villa
            price = randomInt(3000, 15000);
            break;
          case 3: // Commercial
            price = randomInt(2000, 10000);
            break;
          case 4: // Land
            price = randomInt(1500, 7000);
            break;
          case 5: // Summer house
            price = randomInt(2500, 12000);
            break;
          case 6: // Warehouse
            price = randomInt(2000, 8000);
            break;
          default:
            price = randomInt(1500, 5000);
        }
      }
      
      // Adjust price based on city (some cities are more expensive)
      if (cityId === 1) { // Istanbul
        price = Math.round(price * 1.3); // 30% more expensive
      } else if (cityId === 3 || cityId === 4 || cityId === 6) { // Izmir, Antalya, Mugla
        price = Math.round(price * 1.15); // 15% more expensive
      }
      
      // Generate random lat/lng coordinates based on city
      const baseLat = cityCoordinates[cityId as keyof typeof cityCoordinates].lat;
      const baseLng = cityCoordinates[cityId as keyof typeof cityCoordinates].lng;
      const latOffset = randomFloat(-0.05, 0.05);
      const lngOffset = randomFloat(-0.05, 0.05);
      const latitude = baseLat + latOffset;
      const longitude = baseLng + lngOffset;
      
      // Select random district for the city
      const district = cityDistricts[cityId as keyof typeof cityDistricts][randomInt(0, cityDistricts[cityId as keyof typeof cityDistricts].length - 1)];
      
      // Generate address
      const streetName = streetNames[randomInt(0, streetNames.length - 1)];
      const addressSuffix = addressSuffixes[randomInt(0, addressSuffixes.length - 1)];
      const streetNumber = randomInt(1, 200);
      let address = `${streetName} ${addressSuffix} No:${streetNumber}`;
      
      // Maybe add apartment/flat number
      if (propertyTypeId === 1) {
        address += `, Daire:${randomInt(1, 30)}`;
      } else if (propertyTypeId === 3 && Math.random() > 0.5) {
        address += `, No:${randomInt(1, 50)}`;
      }
      
      // Randomly decide if property is featured (about 10% are featured)
      const isFeatured = Math.random() < 0.1;
      
      // Select property title
      const titleOptions = propertyTitles[listingType as keyof typeof propertyTitles][propertyTypeId as keyof typeof propertyTitles.sell];
      const baseTitle = titleOptions[randomInt(0, titleOptions.length - 1)];
      const title = `${baseTitle} - ${district}`;
      
    // Create the listings
    // Create sample cities
    const citiesData: InsertCity[] = [
      { name: "İstanbul", imageUrl: "https://images.unsplash.com/photo-1610116306796-6fea9f4fae38", listingCount: 3245 },
      { name: "Ankara", imageUrl: "https://images.unsplash.com/photo-1589497836818-9ad2fa1df1f4", listingCount: 1876 },
      { name: "İzmir", imageUrl: "https://images.unsplash.com/photo-1619360142632-031d811d1f50", listingCount: 1325 },
      { name: "Antalya", imageUrl: "https://images.unsplash.com/photo-1661416134766-cd0386c4b650", listingCount: 953 },
      { name: "Bursa", imageUrl: "https://images.unsplash.com/photo-1621164918541-56fac1c2a814", listingCount: 716 },
      { name: "Adana", imageUrl: "https://images.unsplash.com/photo-1588974423785-bd276bae2267", listingCount: 526 },
      { name: "Muğla", imageUrl: "https://images.unsplash.com/photo-1533599088300-7a3045c8be83", listingCount: 854 },
      { name: "Trabzon", imageUrl: "https://images.unsplash.com/photo-1578912996078-4a22f9cef86e", listingCount: 425 },
      { name: "Eskişehir", imageUrl: "https://images.unsplash.com/photo-1583337547397-7e08d29fdd0e", listingCount: 512 },
      { name: "Kayseri", imageUrl: "https://images.unsplash.com/photo-1583337547397-7e08d29fdd0e", listingCount: 398 }
    ];
    
    citiesData.forEach(city => this.createCity(city));
    
    // Create sample property types
    const propertyTypesData: InsertPropertyType[] = [
      { name: "Daire", icon: "building", listingCount: 1240 },
      { name: "Villa", icon: "home", listingCount: 485 },
      { name: "İş Yeri", icon: "store", listingCount: 320 },
      { name: "Arsa", icon: "map", listingCount: 218 },
      { name: "Yazlık", icon: "hotel", listingCount: 176 },
      { name: "Depo", icon: "warehouse", listingCount: 92 }
    ];
    
    propertyTypesData.forEach(type => this.createPropertyType(type));
    
    // İlçeler
    const districts = {
      1: ["Beşiktaş", "Kadıköy", "Üsküdar", "Şişli", "Bakırköy", "Ataşehir", "Maltepe", "Beylikdüzü", "Eyüp", "Sarıyer", "Beykoz", "Büyükçekmece"],
      2: ["Çankaya", "Keçiören", "Mamak", "Etimesgut", "Sincan", "Yenimahalle", "Altındağ", "Gölbaşı", "Polatlı"],
      3: ["Konak", "Bornova", "Karşıyaka", "Çiğli", "Buca", "Gaziemir", "Seferihisar", "Çeşme", "Urla"],
      4: ["Muratpaşa", "Konyaaltı", "Kepez", "Alanya", "Manavgat", "Serik", "Kaş", "Kemer", "Side"],
      5: ["Osmangazi", "Nilüfer", "Yıldırım", "Mudanya", "Gemlik", "İnegöl", "Orhangazi"],
      6: ["Seyhan", "Çukurova", "Sarıçam", "Ceyhan", "Kozan", "Yüreğir"],
      7: ["Bodrum", "Fethiye", "Marmaris", "Datça", "Köyceğiz", "Ortaca", "Dalaman"],
      8: ["Ortahisar", "Akçaabat", "Yomra", "Araklı", "Of", "Sürmene"],
      9: ["Tepebaşı", "Odunpazarı", "Sivrihisar", "İnönü", "Çifteler"],
      10: ["Melikgazi", "Kocasinan", "Talas", "Develi", "Yahyalı", "İncesu"]
    };
    
    // Listing tipleri ve fiyat aralıkları
    const listingTypes = ["sell", "rent", "daily"];
    const rentPeriods = { "sell": null, "rent": "monthly", "daily": "daily" };
    
    // Fiyat aralıkları
    const priceRanges = {
      "sell": {
        "Daire": [600000, 9500000],
        "Villa": [3500000, 25000000],
        "İş Yeri": [1500000, 15000000],
        "Arsa": [450000, 12000000],
        "Yazlık": [1200000, 8500000],
        "Depo": [800000, 5000000]
      },
      "rent": {
        "Daire": [5000, 35000],
        "Villa": [18000, 75000],
        "İş Yeri": [12000, 65000],
        "Arsa": [3000, 15000],
        "Yazlık": [12000, 55000],
        "Depo": [8000, 30000]
      },
      "daily": {
        "Daire": [500, 2500],
        "Villa": [1500, 8000],
        "İş Yeri": [1000, 4000],
        "Yazlık": [800, 3500],
        "Depo": [300, 1500]
      }
    };
    
    // Alan aralıkları
    const squareMeterRanges = {
      "Daire": [65, 300],
      "Villa": [150, 800],
      "İş Yeri": [80, 1000],
      "Arsa": [250, 10000],
      "Yazlık": [85, 350],
      "Depo": [100, 2000]
    };
    
    // Oda sayıları
    const roomCountRanges = {
      "Daire": [1, 6],
      "Villa": [3, 10],
      "İş Yeri": [1, 10],
      "Yazlık": [1, 5]
    };
    
    // Banyo sayıları
    const bathroomCountRanges = {
      "Daire": [1, 4],
      "Villa": [2, 6],
      "İş Yeri": [1, 6],
      "Yazlık": [1, 3]
    };
    
    // Otopark sayıları
    const parkingCountRanges = {
      "Daire": [0, 2],
      "Villa": [1, 4],
      "İş Yeri": [1, 20],
      "Yazlık": [0, 2]
    };
    
    // Konum resim URL'leri
    const imageUrls = [
      "https://images.unsplash.com/photo-1600585154340-be6161a56a0c",
      "https://images.unsplash.com/photo-1600566753376-12c8ab8e546f",
      "https://images.unsplash.com/photo-1600573472550-8090733a73c5",
      "https://images.unsplash.com/photo-1600566753190-17f0baa2a6c3",
      "https://images.unsplash.com/photo-1600607687939-ce8a6c25118c",
      "https://images.unsplash.com/photo-1600566752355-35792bedcfea",
      "https://images.unsplash.com/photo-1600585154526-990dced4db3d",
      "https://images.unsplash.com/photo-1600585152220-90363fe7e115",
      "https://images.unsplash.com/photo-1600607687920-4e2a09cf159d",
      "https://images.unsplash.com/photo-1574362848149-11496d93a7c7",
      "https://images.unsplash.com/photo-1600563440091-6abb814a2132",
      "https://images.unsplash.com/photo-1600566753086-00f18fb6b3ea",
      "https://images.unsplash.com/photo-1613977257592-4a9a32f9141b",
      "https://images.unsplash.com/photo-1613977257363-707ba9348227",
      "https://images.unsplash.com/photo-1554995207-c18c203602cb",
      "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2",
      "https://images.unsplash.com/photo-1593696140826-c58b021acf8b",
      "https://images.unsplash.com/photo-1600210492486-724fe5c67fb0",
      "https://images.unsplash.com/photo-1600047509807-ba8f99d2cdde",
      "https://images.unsplash.com/photo-1600566752584-3d16b14snabb7",
      "https://images.unsplash.com/photo-1602343168117-bb8ffe3e2e9f",
      "https://images.unsplash.com/photo-1522708323590-d24dbb6b0267",
      "https://images.unsplash.com/photo-1560448075-cbc16bb4af8e",
      "https://images.unsplash.com/photo-1600047508788-26df7b3d6119",
      "https://images.unsplash.com/photo-1560440021-33f9b867899d"
    ];
    
    // İlan başlıkları
    const titlePrefixes = [
      "Modern", "Lüks", "Ferah", "Geniş", "Konforlu", "Yeni", "Yenilenmiş", "Bakımlı", "Şık", "Prestijli", 
      "Merkezi", "Keyifli", "Aydınlık", "Güvenlikli", "Muhteşem", "Gösterişli", "Elit", "Kaliteli", "Uygun", "Nezih"
    ];
    
    const titleSuffixes = {
      "Daire": ["Daire", "Apartman Dairesi", "Rezidans", "Kat", "Dubleks", "Daire", "Penthouse", "Stüdyo Daire"],
      "Villa": ["Villa", "Müstakil Ev", "Köşk", "Malikane", "Bahçeli Ev", "Yazlık Villa", "Dubleks Villa"],
      "İş Yeri": ["Ofis", "Mağaza", "Dükkan", "İş Yeri", "Ticari Alan", "Plaza Katı", "Showroom", "Atölye"],
      "Arsa": ["Arsa", "Tarla", "Bahçe", "Zeytinlik", "Bağ", "İmarlı Arsa", "Yatırımlık Arsa"],
      "Yazlık": ["Yazlık", "Tatil Evi", "Köy Evi", "Bungalov", "Sahil Evi", "Yaz Evi"],
      "Depo": ["Depo", "Antrepo", "Lojistik Depo", "Soğuk Hava Deposu", "Endüstriyel Depo"]
    };
    
    // Adres bileşenleri
    const streetNames = ["Atatürk", "Cumhuriyet", "İstiklal", "Fatih", "Barış", "Gül", "Çiçek", "Menekşe", "Lale", "Zambak", "Orkide", "Palmiye", "Akasya", "Çınar", "Ihlamur"];
    const streetTypes = ["Caddesi", "Sokak", "Bulvarı", "Yolu", "Meydanı"];
    
    // İlan açıklamaları için metinler
    const descriptionIntros = [
      "Muhteşem konumuyla",
      "Şehrin en prestijli bölgesinde yer alan",
      "Ferah ve aydınlık",
      "Yenilenen mimarisiyle",
      "Geniş ve konforlu",
      "Modern tasarımıyla dikkat çeken",
      "Lüks detaylarla donatılmış",
      "Bakımlı ve temiz",
      "Şık ve zarif",
      "Yeşillikler içinde"
    ];
    
    const descriptionMiddles = {
      "Daire": [
        "bu daire sizleri bekliyor. Site içerisinde",
        "bu apartman dairesi huzurlu bir yaşam sunuyor. Bina içerisinde",
        "bu rezidans dairesi yüksek yaşam standardı sunuyor. Kompleks içerisinde",
        "bu ferah daire aile yaşamına uygun. Çevresinde",
        "bu konforlu daire tüm beklentilerinizi karşılıyor. Site içerisinde"
      ],
      "Villa": [
        "bu villa lüks detaylarıyla sizi büyüleyecek. Bahçesinde",
        "bu müstakil ev geniş yaşam alanlarıyla dikkat çekiyor. Çevresinde",
        "bu köşk benzersiz mimarisiyle göz dolduruyor. Geniş arazisi içerisinde",
        "bu malikane özel peyzaj düzenlemesiyle etkileyici. Arazisinde",
        "bu villa özel tasarımıyla ayrıcalıklı bir yaşam sunuyor. Bahçesinde"
      ],
      "İş Yeri": [
        "bu ofis yatırımcılarını bekliyor. Bina içerisinde",
        "bu ticari alan işinize değer katacak. Çevresinde",
        "bu iş yeri stratejik konumuyla işinize avantaj sağlayacak. Binada",
        "bu mağaza yüksek cirolar için ideal. Kompleks içerisinde",
        "bu plaza katı prestijli konumuyla işinizi öne çıkaracak. Çevresinde"
      ],
      "Arsa": [
        "bu arsa yatırımcılarını bekliyor. Çevresinde",
        "bu imarlı arsa geleceğin yatırımını bugünden yapma fırsatı sunuyor. Bölgede",
        "bu tarla verimli toprağıyla dikkat çekiyor. Etrafında",
        "bu arsa gelişmekte olan bölgede yüksek değer artışı vadediyor. Çevrede",
        "bu zeytinlik hem yatırım hem de yaşam alanı olarak değerlendirilebilir. Bölgede"
      ],
      "Yazlık": [
        "bu yazlık tatil keyfinizi üst seviyeye çıkaracak. Site içerisinde",
        "bu tatil evi yaz aylarını keyifle geçirmenizi sağlayacak. Çevresinde",
        "bu sahil evi denize yakın konumuyla dikkat çekiyor. Bölgede",
        "bu yazlık villa tüm yıl yaşam için uygun. Site içerisinde",
        "bu tatil evi huzurlu bir ortam sunuyor. Çevrede"
      ],
      "Depo": [
        "bu depo lojistik faaliyetleriniz için ideal. Çevresinde",
        "bu endüstriyel depo üretim ve depolama için uygun. Bölgede",
        "bu antrepo geniş kullanım alanıyla işlerinizi kolaylaştıracak. Çevrede",
        "bu depo modern altyapısıyla işinize değer katacak. Bölgede",
        "bu lojistik depo stratejik konumuyla operasyonlarınızı hızlandıracak. Çevrede"
      ]
    };
    
    const amenities = {
      "Daire": ["havuz", "spor salonu", "güvenlik", "otopark", "çocuk oyun alanı", "yürüyüş parkuru", "sauna", "market", "kuaför"],
      "Villa": ["özel havuz", "bahçe", "teras", "barbekü alanı", "güvenlik", "jakuzi", "şömine", "akıllı ev sistemi", "oyun odası", "sinema odası"],
      "İş Yeri": ["asansör", "güvenlik", "otopark", "toplantı salonu", "ortak kafeterya", "resepsiyon", "jeneratör", "fiber internet", "konferans salonu"],
      "Arsa": ["elektrik", "su", "doğalgaz", "kanalizasyon", "yol", "toplu taşıma", "okul", "hastane", "market"],
      "Yazlık": ["havuz", "plaj", "restoran", "bar", "güvenlik", "otopark", "tenis kortu", "basketbol sahası", "mini golf", "aquapark"],
      "Depo": ["yükleme rampası", "24 saat güvenlik", "otopark", "ofis alanı", "yüksek tavan", "forklift", "tır park alanı", "jeneratör", "yangın söndürme sistemi"]
    };
    
    const descriptionOutros = [
      "bulunuyor. Bu fırsatı kaçırmayın!",
      "mevcut. Detaylı bilgi için lütfen arayın.",
      "yer alıyor. Hemen görmelisiniz!",
      "sunuluyor. Bu fırsat için acele edin!",
      "bulunmakta. Sizin için ideal bir seçim olabilir.",
      "sağlanıyor. Hemen iletişime geçin!",
      "bulunuyor. Mutlaka görmelisiniz!"
    ];
    
    const coordinates = {
      1: { lat: 41.0082, lng: 28.9784 }, // İstanbul
      2: { lat: 39.9334, lng: 32.8597 }, // Ankara
      3: { lat: 38.4192, lng: 27.1287 }, // İzmir
      4: { lat: 36.8969, lng: 30.7133 }, // Antalya
      5: { lat: 40.1885, lng: 29.0610 }, // Bursa
      6: { lat: 37.0000, lng: 35.3213 }, // Adana
      7: { lat: 37.2153, lng: 28.3636 }, // Muğla
      8: { lat: 41.0027, lng: 39.7168 }, // Trabzon
      9: { lat: 39.7667, lng: 30.5256 }, // Eskişehir
      10: { lat: 38.7205, lng: 35.4826 }  // Kayseri
    };
    
    // Rasgele sayı üretici
    const randomInt = (min: number, max: number) => Math.floor(Math.random() * (max - min + 1)) + min;
    const randomFloat = (min: number, max: number) => Math.random() * (max - min) + min;
    const randomChoice = <T>(arr: T[]): T => arr[Math.floor(Math.random() * arr.length)];
    const randomDate = (start: Date, end: Date) => new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()));
    
    // Rasgele fiyat üret
    const randomPrice = (min: number, max: number) => {
      const price = Math.floor(randomInt(min, max) / 1000) * 1000; // 1000'in katları
      return price;
    };
    
    // 200 adet emlak ilanı oluştur
    const listingsData: InsertListing[] = [];
    
    for (let i = 0; i < 200; i++) {
      // Rasgele bir şehir seç
      const cityId = randomInt(1, citiesData.length);
      // Rasgele bir ilçe seç
      const district = randomChoice(districts[cityId as keyof typeof districts]);
      // Rasgele bir mülk tipi seç
      const propertyTypeIndex = randomInt(0, propertyTypesData.length - 1);
      const propertyTypeId = propertyTypeIndex + 1;
      const propertyTypeName = propertyTypesData[propertyTypeIndex].name;
      
      // Rasgele bir ilan tipi seç
      const listingType = randomChoice(listingTypes);
      // Uygun kira periyodu seç
      const rentPeriod = rentPeriods[listingType as keyof typeof rentPeriods];
      
      // Rasgele bir başlık oluştur
      const titlePrefix = randomChoice(titlePrefixes);
      const titleSuffix = randomChoice(titleSuffixes[propertyTypeName as keyof typeof titleSuffixes]);
      const title = `${titlePrefix} ${titleSuffix}`;
      
      // Fiyat belirleme
      let price;
      if (listingType === "sell") {
        price = randomPrice(
          priceRanges.sell[propertyTypeName as keyof typeof priceRanges.sell][0],
          priceRanges.sell[propertyTypeName as keyof typeof priceRanges.sell][1]
        );
      } else if (listingType === "rent") {
        price = randomPrice(
          priceRanges.rent[propertyTypeName as keyof typeof priceRanges.rent][0],
          priceRanges.rent[propertyTypeName as keyof typeof priceRanges.rent][1]
        );
      } else {
        // Eğer 'daily'
        price = randomPrice(
          priceRanges.daily[propertyTypeName as keyof typeof priceRanges.daily]?.[0] || 500,
          priceRanges.daily[propertyTypeName as keyof typeof priceRanges.daily]?.[1] || 3000
        );
      }
      
      // Metrekare belirleme
      const squareMeters = randomInt(
        squareMeterRanges[propertyTypeName as keyof typeof squareMeterRanges][0],
        squareMeterRanges[propertyTypeName as keyof typeof squareMeterRanges][1]
      );
      
      // Oda, banyo ve otopark sayılarını belirleme
      let roomCount = null;
      let bathroomCount = null;
      let parkingCount = null;
      
      if (roomCountRanges[propertyTypeName as keyof typeof roomCountRanges]) {
        roomCount = randomInt(
          roomCountRanges[propertyTypeName as keyof typeof roomCountRanges][0],
          roomCountRanges[propertyTypeName as keyof typeof roomCountRanges][1]
        );
      }
      
      if (bathroomCountRanges[propertyTypeName as keyof typeof bathroomCountRanges]) {
        bathroomCount = randomInt(
          bathroomCountRanges[propertyTypeName as keyof typeof bathroomCountRanges][0],
          bathroomCountRanges[propertyTypeName as keyof typeof bathroomCountRanges][1]
        );
      }
      
      if (parkingCountRanges[propertyTypeName as keyof typeof parkingCountRanges]) {
        parkingCount = randomInt(
          parkingCountRanges[propertyTypeName as keyof typeof parkingCountRanges][0],
          parkingCountRanges[propertyTypeName as keyof typeof parkingCountRanges][1]
        );
      }
      
      // Rasgele bir adres oluştur
      const streetName = randomChoice(streetNames);
      const streetType = randomChoice(streetTypes);
      const buildingNo = randomInt(1, 150);
      const address = `${district} Mah. ${streetName} ${streetType} No:${buildingNo}`;
      
      // Rasgele bir açıklama oluştur
      const descIntro = randomChoice(descriptionIntros);
      const descMiddle = randomChoice(descriptionMiddles[propertyTypeName as keyof typeof descriptionMiddles]);
      
      // Rasgele özellikler seç
      const propertyAmenities = amenities[propertyTypeName as keyof typeof amenities];
      const selectedAmenities = [];
      const amenityCount = randomInt(2, 4);
      
      for (let j = 0; j < amenityCount; j++) {
        if (propertyAmenities && propertyAmenities.length > 0) {
          const amenity = randomChoice(propertyAmenities);
          selectedAmenities.push(amenity);
          // Seçilen özelliği listeden çıkar
          propertyAmenities.splice(propertyAmenities.indexOf(amenity), 1);
        }
      }
      
      const amenitiesText = selectedAmenities.join(", ");
      const descOutro = randomChoice(descriptionOutros);
      
      const description = `${descIntro} ${descMiddle} ${amenitiesText} ${descOutro}`;
      
      // Rasgele koordinatlar üret
      const baseLat = coordinates[cityId as keyof typeof coordinates].lat;
      const baseLng = coordinates[cityId as keyof typeof coordinates].lng;
      const latOffset = randomFloat(-0.05, 0.05);
      const lngOffset = randomFloat(-0.05, 0.05);
      const latitude = baseLat + latOffset;
      const longitude = baseLng + lngOffset;
      
      // Rasgele resimler seç
      const shuffledImages = [...imageUrls].sort(() => 0.5 - Math.random());
      const selectedImages = shuffledImages.slice(0, randomInt(3, 6));
      
      // Rasgele bir kullanıcı seç
      const userId = randomInt(1, usersData.length);
      
      // Öne çıkan ilan olma durumunu belirle
      const isFeatured = Math.random() < 0.1; // %10 olasılıkla öne çıkan ilan
      
      // İlan oluşturma tarihini belirle (son 6 ay içinde)
      const sixMonthsAgo = new Date();
      sixMonthsAgo.setMonth(sixMonthsAgo.getMonth() - 6);
      const postedAt = randomDate(sixMonthsAgo, new Date());
      
      // İlanı oluştur
      const listing: InsertListing = {
        title,
        description,
        price,
        listingType,
        rentPeriod,
        propertyTypeId,
        cityId,
        district,
        address,
        squareMeters,
        roomCount,
        bathroomCount,
        parkingCount,
        isFeatured,
        userId,
        imageUrls: selectedImages,
        latitude,
        longitude
      };
      
      listingsData.push(listing);
    }
    
    // İlanları oluştur
    listingsData.forEach(listing => this.createListing(listing));
  }
}

export const storage = new MemStorage();
